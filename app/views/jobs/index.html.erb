<%# Combined Form for All Filters %>
<%= form_with url: jobs_path, method: :get, data: { controller: "price-range", price_range_target: "form", turbo_frame: "jobs_list" } do |f| %>
  <%# Top Filters %>
  <div class="mx-10 space-x-12 flex flex-row my-5">
    <div class="flex flex-row space-x-4 w-[200px]">
      <div class="border-gray-300 border-2 rounded-full px-2.5 content-center"><svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 512 512"><path fill="#d1d5db" d="M184 48l144 0c4.4 0 8 3.6 8 8l0 40L176 96l0-40c0-4.4 3.6-8 8-8zm-56 8l0 40L64 96C28.7 96 0 124.7 0 160l0 96 192 0 128 0 192 0 0-96c0-35.3-28.7-64-64-64l-64 0 0-40c0-30.9-25.1-56-56-56L184 0c-30.9 0-56 25.1-56 56zM512 288l-192 0 0 32c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32l0-32L0 288 0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-128z"/></svg></div>
      <div class="relative z-0">
        <%= f.text_field :title, id: "job_title", onchange: "this.form.requestSubmit();", class: "block py-2.5 px-0 w-full text-sm text-gray-200 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-primary-orange focus:outline-none focus:ring-0 focus:border-primary-orange peer", placeholder: " " %>
        <%= f.label :title, for: "job_title", class: "absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-focus:text-primary-orange peer-focus:dark:text-primary-orange peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto" %>
      </div>
    </div>
    <div class="flex flex-row space-x-4 w-[200px]">
      <div class="border-gray-300 border-2 rounded-full px-3 content-center">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" width="15" viewBox="0 0 384 512">
          <path fill="#d1d5db" d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/>
        </svg>
      </div>
      <div class="relative z-0">
        <%= f.text_field :location, id: "job_location", onchange: "this.form.requestSubmit();", class: "block py-2.5 px-0 w-full text-sm text-gray-200 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-primary-orange focus:outline-none focus:ring-0 focus:border-primary-orange peer", placeholder: " " %>
        <%= f.label :location, for: "job_location", class: "absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-focus:text-primary-orange peer-focus:dark:text-primary-orange peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto" %>
      </div>
    </div>
    <div class="flex flex-row space-x-4 w-[200px] z-10">
      <div class="border-gray-300 border-2 rounded-full px-2.5 content-center">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" width="17.5" viewBox="0 0 448 512">
          <path fill="#d1d5db" d="M96 128a128 128 0 1 0 256 0A128 128 0 1 0 96 128zm94.5 200.2l18.6 31L175.8 483.1l-36-146.9c-2-8.1-9.8-13.4-17.9-11.3C51.9 342.4 0 405.8 0 481.3c0 17 13.8 30.7 30.7 30.7l131.7 0c0 0 0 0 .1 0l5.5 0 112 0 5.5 0c0 0 0 0 .1 0l131.7 0c17 0 30.7-13.8 30.7-30.7c0-75.5-51.9-138.9-121.9-156.4c-8.1-2-15.9 3.3-17.9 11.3l-36 146.9L238.9 359.2l18.6-31c6.4-10.7-1.3-24.2-13.7-24.2L224 304l-19.7 0c-12.4 0-20.1 13.6-13.7 24.2z"/>
        </svg>
      </div>
      <div class="relative ">
        <%= f.select :industry,
            options_for_select([
              ["Any", ""],
              ["Software Development", "Software Development"],
              ["Marketing & Graphic Design", "Marketing & Graphic Design"],
              ["Fashion", "Fashion"],
              ["Photography", "Photography"],
              ["Video & Film", "Video & Film"],
              ["Architecture", "Architecture"],
              ["Finance & Accounting", "Finance & Accounting"]
            ], params[:industry]),
            {},
            { id: "industry", onchange: "this.form.requestSubmit();", class: "block px-0 w-full text-sm text-gray-200 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-primary-orange peer" }
        %>
        <%= f.label :industry, for: "industry", class: "absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-focus:text-primary-orange peer-focus:dark:text-primary-orange peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto" %>
      </div>
    </div>
    <div class="flex flex-row space-x-4">
      <div class="border-gray-300 border-2 rounded-full px-2 content-center">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" width="22.5" viewBox="0 0 576 512">
          <path fill="#d1d5db" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm64 320l-64 0 0-64c35.3 0 64 28.7 64 64zM64 192l0-64 64 0c0 35.3-28.7 64-64 64zM448 384c0-35.3 28.7-64 64-64l0 64-64 0zm64-192c-35.3 0-64-28.7-64-64l64 0 0 64zM288 160a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/>
        </svg>
      </div>
      <div class="relative z-0 w-[250px]"
           data-price-range-min-value="100"
           data-price-range-max-value="1500">
        <%= f.label :price_range, for: "price_range", class: "block text-sm text-gray-500 dark:text-gray-400" %>
        <div class="relative">
          <%= f.range_field :price_range,
              min: 100, max: 1500, step: 100,
              value: params[:price_range] || 1000,
              data: {
                price_range_target: "slider",
                action: "input->price-range#updateDisplay change->price-range#submit"
              },
              class: "w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" %>
          <span class="text-xs text-gray-500 dark:text-gray-400 absolute start-0 -bottom-6">Min ($100)</span>
          <span class="text-xs text-gray-500 dark:text-gray-400 absolute start-1/3 -translate-x-1/2 rtl:translate-x-1/2 -bottom-6">$500</span>
          <span class="text-xs text-gray-500 dark:text-gray-400 absolute start-2/3 -translate-x-1/2 rtl:translate-x-1/2 -bottom-6">$1000</span>
          <span class="text-xs text-gray-500 dark:text-gray-400 absolute end-0 -bottom-6">Any</span>
        </div>
        <%# <p class="mt-8 text-sm text-gray-300">Selected price: <span data-price-range-target="display"></span></p> %>
      </div>
    </div>
  </div>

  <%# Body Container %>
  <div class="flex flex-row mx-10">
    <%# Side filters %>
    <div class="flex flex-col py-5 w-1/4 h-full">
      <h1 class="text-white">Filters</h1>
      <h2 class="text-gray-300 text-sm my-2 mt-6">Working Schedule</h2>
      <ul class="text-white text-xs font-light space-y-3">
        <li>
          <%= f.check_box :tags, { multiple: true, class: "w-4 h-4 text-primary-orange bg-gray-100 border-gray-300 rounded focus:ring-primary-orange dark:focus:ring-primary-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600", onchange: "this.form.requestSubmit();" }, "full_time", nil %>
          <label for="tags_full_time" class="ms-2 text-xs font-light text-gray-300">Full-Time</label>
        </li>
        <li>
          <%= f.check_box :tags, { multiple: true, class: "w-4 h-4 text-primary-orange bg-gray-100 border-gray-300 rounded focus:ring-primary-orange dark:focus:ring-primary-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600", onchange: "this.form.requestSubmit();" }, "part_time", nil %>
          <label for="tags_part_time" class="ms-2 text-xs font-light text-gray-300">Part-Time</label>
        </li>
        <li>
          <%= f.check_box :tags, { multiple: true, class: "w-4 h-4 text-primary-orange bg-gray-100 border-gray-300 rounded focus:ring-primary-orange dark:focus:ring-primary-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600", onchange: "this.form.requestSubmit();" }, "project_work", nil %>
          <label for="tags_project_work" class="ms-2 text-xs font-light text-gray-300">Project Work</label>
        </li>
        <li>
          <%= f.check_box :tags, { multiple: true, class: "w-4 h-4 text-primary-orange bg-gray-100 border-gray-300 rounded focus:ring-primary-orange dark:focus:ring-primary-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600", onchange: "this.form.requestSubmit();" }, "shift_work", nil %>
          <label for="tags_shift_work" class="ms-2 text-xs font-light text-gray-300">Shift Work</label>
        </li>
      </ul>
      <h2 class="text-gray-300 text-sm my-2 mt-6">Employment Type</h2>
      <div class="flex items-center mb-4">
        <ul class="text-white text-xs font-light space-y-3">
          <li>
            <%= f.check_box :tags, { multiple: true, class: "w-4 h-4 text-primary-orange bg-gray-100 border-gray-300 rounded focus:ring-primary-orange dark:focus:ring-primary-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600", onchange: "this.form.requestSubmit();" }, "full_day", nil %>
            <label for="tags_full_day" class="ms-2 text-xs font-light text-gray-300">Full Day</label>
          </li>
          <li>
            <%= f.check_box :tags, { multiple: true, class: "w-4 h-4 text-primary-orange bg-gray-100 border-gray-300 rounded focus:ring-primary-orange dark:focus:ring-primary-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600", onchange: "this.form.requestSubmit();" }, "flexible", nil %>
            <label for="tags_flexible" class="ms-2 text-xs font-light text-gray-300">Flexible</label>
          </li>
          <li>
            <%= f.check_box :tags, { multiple: true, class: "w-4 h-4 text-primary-orange bg-gray-100 border-gray-300 rounded focus:ring-primary-orange dark:focus:ring-primary-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600", onchange: "this.form.requestSubmit();" }, "hybrid", nil %>
            <label for="tags_hybrid" class="ms-2 text-xs font-light text-gray-300">Hybrid</label>
          </li>
          <li>
            <%= f.check_box :tags, { multiple: true, class: "w-4 h-4 text-primary-orange bg-gray-100 border-gray-300 rounded focus:ring-primary-orange dark:focus:ring-primary-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600", onchange: "this.form.requestSubmit();" }, "in_person", nil %>
            <label for="tags_in_person" class="ms-2 text-xs font-light text-gray-300">In-Person</label>
          </li>
          <li>
            <%= f.check_box :tags, { multiple: true, class: "w-4 h-4 text-primary-orange bg-gray-100 border-gray-300 rounded focus:ring-primary-orange dark:focus:ring-primary-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600", onchange: "this.form.requestSubmit();" }, "remote", nil %>
            <label for="tags_remote" class="ms-2 text-xs font-light text-gray-300">Remote</label>
          </li>
        </ul>
      </div>
    </div>

    <%# Job Cards and Pagination %>
    <%= turbo_frame_tag "jobs_list" do %>
      <div class="w-full">
        <%= render 'shared/job_card', jobs: @jobs %>

        <%# Pagination %>
        <div class="mt-8 flex justify-center text-white">
          <%= paginate @jobs %>
        </div>
      </div>
    <% end %>
  </div>

  <%= f.submit "Search", class: "hidden" %>
<% end %>
